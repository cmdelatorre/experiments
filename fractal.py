from PIL import Image, ImageDraw
import math, colorsys, sys


dimensions = (1920, 1280)
iterate_max = 255

palette = [(255, 140, 140),(255, 145, 135), (255, 150, 130), (254, 155, 124), (254, 160, 119), (253, 165, 113), (252, 170, 107), (251, 174, 102), (250, 179, 96), (249, 183, 90), (247, 188, 84), (246, 192, 78),
                 (244, 196, 72), (242, 200, 66), (240, 204, 60), (238, 207, 54), (236, 211, 48), (233, 214, 42), (231, 218, 36), (228, 221, 29), (225, 224, 23), (222, 227, 17), (219, 230, 11), (215, 232, 4), (212, 235, 2), (208, 237, 8), (205, 239, 14), (201, 242, 21), (197, 243, 27), (193, 245, 33), (189, 247, 39), (185, 248, 45), (180, 250, 52), (176, 251, 58), (171, 252, 64), (167, 253, 70), (162, 254, 76), (157, 254, 82), (152, 255, 88), (147, 255, 94), (142, 255, 99), (136, 255, 105), (131, 255, 111), (126, 254, 116), (120, 254, 122), (115, 253, 127), (109, 253, 133), (103, 252, 138), (98, 250, 143), (92, 249, 148), (86, 248, 153), (80, 246, 158), (74, 245, 163), (68, 243, 168), (62, 241, 173), (56, 239, 177), (50, 236, 182), (44, 234, 186), (37, 231, 190), (31, 229, 194), (25, 226, 198), (19, 223, 202), (13, 220, 206), (6, 216, 210), (0, 213, 213), (6, 210, 216), (13, 206, 220), (19, 202, 223), (25, 198, 226), (31, 194, 229), (37, 190, 231), (44, 186, 234), (50, 182, 236), (56, 177, 239), (62, 173, 241), (68, 168, 243), (74, 163, 245), (80, 158, 246), (86, 153, 248), (92, 148, 249), (98, 143, 250), (103, 138, 252), (109, 133, 253), (115, 127, 253), (120, 122, 254), (126, 116, 254), (131, 111, 255), (136, 105, 255), (142, 99, 255), (147, 94, 255), (152, 88, 255), (157, 82, 254), (162, 76, 254), (167, 70, 253), (171, 64, 252), (176, 58, 251), (180, 52, 250), (185, 45, 248), (189, 39, 247), (193, 33, 245), (197, 27, 243), (201, 21, 242), (205, 14, 239), (208, 8, 237), (212, 2, 235), (215, 4, 232), (219, 11, 230), (222, 17, 227), (225, 23, 224), (228, 29, 221), (231, 36, 218), (233, 42, 214), (236, 48, 211), (238, 54, 207), (240, 60, 204), (242, 66, 200), (244, 72, 196), (246, 78, 192), (247, 84, 188), (249, 90, 183), (250, 96, 179), (251, 102, 174), (252, 107, 170), (253, 113, 165), (254, 119, 160), (254, 124, 155), (255, 130, 150), (255, 135, 145), (255, 140, 140), (255, 145, 135), (255, 150, 130), (254, 155, 124), (254, 160, 119), (253, 165, 113), (252, 170, 107), (251, 174, 102), (250, 179, 96), (249, 183, 90), (247, 188, 84), (246, 192, 78), (244, 196, 72), (242, 200, 66), (240, 204, 60), (238, 207, 54), (236, 211, 48), (233, 214, 42), (231, 218, 36), (228, 221, 29), (225, 224, 23), (222, 227, 17), (219, 230, 11), (215, 232, 4), (212, 235, 2), (208, 237, 8), (205, 239, 14), (201, 242, 21), (197, 243, 27), (193, 245, 33), (189, 247, 39), (185, 248, 45), (180, 250, 52), (176, 251, 58), (171, 252, 64), (167, 253, 70), (162, 254, 76), (157, 254, 82), (152, 255, 88), (147, 255, 94), (142, 255, 99), (136, 255, 105), (131, 255, 111), (126, 254, 116), (120, 254, 122), (115, 253, 127), (109, 253, 133), (103, 252, 138), (98, 250, 143), (92, 249, 148), (86, 248, 153), (80, 246, 158), (74, 245, 163), (68, 243, 168), (62, 241, 173), (56, 239, 177), (50, 236, 182), (44, 234, 186), (37, 231, 190), (31, 229, 194), (25, 226, 198), (19, 223, 202), (13, 220, 206), (6, 216, 210), (0, 213, 213), (6, 210, 216), (13, 206, 220), (19, 202, 223), (25, 198, 226), (31, 194, 229), (37, 190, 231), (44, 186, 234), (50, 182, 236), (56, 177, 239), (62, 173, 241), (68, 168, 243), (74, 163, 245), (80, 158, 246), (86, 153, 248), (92, 148, 249), (98, 143, 250), (103, 138, 252), (109, 133, 253), (115, 127, 253), (120, 122, 254), (126, 116, 254), (131, 111, 255), (136, 105, 255), (142, 99, 255), (147, 94, 255), (152, 88, 255), (157, 82, 254), (162, 76, 254), (167, 70, 253), (171, 64, 252), (176, 58, 251), (180, 52, 250), (185, 45, 248), (189, 39, 247), (193, 33, 245), (197, 27, 243), (201, 21, 242), (205, 14, 239), (208, 8, 237), (212, 2, 235), (215, 4, 232), (219, 11, 230), (222, 17, 227), (225, 23, 224), (228, 29, 221), (231, 36, 218), (233, 42, 214), (236, 48, 211), (238, 54, 207), (240, 60, 204), (242, 66, 200), (244, 72, 196), (246, 78, 192), (247, 84, 188), (249, 90, 183), (250, 96, 179), (251, 102, 174), (252, 107, 170), (253, 113, 165), (254, 119, 160), (254, 124, 155), (255, 130, 150), (255, 135, 145)]
colors_max = len(palette)


def compute_mandelbrot_set(img):
    width = dimensions[0]
    height = dimensions[1]
    row = 0
    for ypixel in xrange(height):
        for xpixel in xrange(width):
            x = -2 + (3*(float(xpixel)/float(width)))
            y = -1 + (2*(float(ypixel)/float(height)))
            z = complex(x,y)
            c = z
            colour = (0,0,0)
            for iteration in xrange(iterate_max):
                z = (z*z)+c
                if abs(z) > 2.236:
                    break
                else:
                    if iteration == iterate_max-1:
                        colour = (0,0,0)
                    else:
                        colour = palette[iteration%len(palette)]
            img.point((xpixel, height - ypixel), fill=colour)
        row += 1
        if row % 100 == 0:
            percent_done = round( (float(row)/float(height)), 3 ) * 100
            print "Row "+str(row)+"/"+str(height)+" ("+str(percent_done)+"%) Complete!"


img = Image.new("RGB", dimensions)
d = ImageDraw.Draw(img)
compute_mandelbrot_set(d)
del d
img.save("mandelbrot.png")
print("mandelbrot.png")
