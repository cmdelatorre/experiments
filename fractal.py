from PIL import Image, ImageDraw
import math, colorsys, sys


dimensions = (640, 480)
scale = 2.0/(dimensions[0])
#center = (2.2, 1.5)       # Use this for Mandelbrot set
center = (1, 1)       # Use this for Julia set
iterate_max = 255
colors_max = 1024

# Calculate a tolerable palette
# palette = [0] * colors_max
# for i in range(colors_max):
#     f = 1-abs((float(i)/colors_max-1)**15)
#     r, g, b = colorsys.hsv_to_rgb(.33+f/3, 1-f/2, f)
#     palette[i] = (int(r*255), int(g*255), int(b*255))

palette = [(255, 140, 140),(255, 145, 135), (255, 150, 130), (254, 155, 124), (254, 160, 119), (253, 165, 113), (252, 170, 107), (251, 174, 102), (250, 179, 96), (249, 183, 90), (247, 188, 84), (246, 192, 78),
                 (244, 196, 72), (242, 200, 66), (240, 204, 60), (238, 207, 54), (236, 211, 48), (233, 214, 42), (231, 218, 36), (228, 221, 29), (225, 224, 23), (222, 227, 17), (219, 230, 11), (215, 232, 4), (212, 235, 2), (208, 237, 8), (205, 239, 14), (201, 242, 21), (197, 243, 27), (193, 245, 33), (189, 247, 39), (185, 248, 45), (180, 250, 52), (176, 251, 58), (171, 252, 64), (167, 253, 70), (162, 254, 76), (157, 254, 82), (152, 255, 88), (147, 255, 94), (142, 255, 99), (136, 255, 105), (131, 255, 111), (126, 254, 116), (120, 254, 122), (115, 253, 127), (109, 253, 133), (103, 252, 138), (98, 250, 143), (92, 249, 148), (86, 248, 153), (80, 246, 158), (74, 245, 163), (68, 243, 168), (62, 241, 173), (56, 239, 177), (50, 236, 182), (44, 234, 186), (37, 231, 190), (31, 229, 194), (25, 226, 198), (19, 223, 202), (13, 220, 206), (6, 216, 210), (0, 213, 213), (6, 210, 216), (13, 206, 220), (19, 202, 223), (25, 198, 226), (31, 194, 229), (37, 190, 231), (44, 186, 234), (50, 182, 236), (56, 177, 239), (62, 173, 241), (68, 168, 243), (74, 163, 245), (80, 158, 246), (86, 153, 248), (92, 148, 249), (98, 143, 250), (103, 138, 252), (109, 133, 253), (115, 127, 253), (120, 122, 254), (126, 116, 254), (131, 111, 255), (136, 105, 255), (142, 99, 255), (147, 94, 255), (152, 88, 255), (157, 82, 254), (162, 76, 254), (167, 70, 253), (171, 64, 252), (176, 58, 251), (180, 52, 250), (185, 45, 248), (189, 39, 247), (193, 33, 245), (197, 27, 243), (201, 21, 242), (205, 14, 239), (208, 8, 237), (212, 2, 235), (215, 4, 232), (219, 11, 230), (222, 17, 227), (225, 23, 224), (228, 29, 221), (231, 36, 218), (233, 42, 214), (236, 48, 211), (238, 54, 207), (240, 60, 204), (242, 66, 200), (244, 72, 196), (246, 78, 192), (247, 84, 188), (249, 90, 183), (250, 96, 179), (251, 102, 174), (252, 107, 170), (253, 113, 165), (254, 119, 160), (254, 124, 155), (255, 130, 150), (255, 135, 145), (255, 140, 140), (255, 145, 135), (255, 150, 130), (254, 155, 124), (254, 160, 119), (253, 165, 113), (252, 170, 107), (251, 174, 102), (250, 179, 96), (249, 183, 90), (247, 188, 84), (246, 192, 78), (244, 196, 72), (242, 200, 66), (240, 204, 60), (238, 207, 54), (236, 211, 48), (233, 214, 42), (231, 218, 36), (228, 221, 29), (225, 224, 23), (222, 227, 17), (219, 230, 11), (215, 232, 4), (212, 235, 2), (208, 237, 8), (205, 239, 14), (201, 242, 21), (197, 243, 27), (193, 245, 33), (189, 247, 39), (185, 248, 45), (180, 250, 52), (176, 251, 58), (171, 252, 64), (167, 253, 70), (162, 254, 76), (157, 254, 82), (152, 255, 88), (147, 255, 94), (142, 255, 99), (136, 255, 105), (131, 255, 111), (126, 254, 116), (120, 254, 122), (115, 253, 127), (109, 253, 133), (103, 252, 138), (98, 250, 143), (92, 249, 148), (86, 248, 153), (80, 246, 158), (74, 245, 163), (68, 243, 168), (62, 241, 173), (56, 239, 177), (50, 236, 182), (44, 234, 186), (37, 231, 190), (31, 229, 194), (25, 226, 198), (19, 223, 202), (13, 220, 206), (6, 216, 210), (0, 213, 213), (6, 210, 216), (13, 206, 220), (19, 202, 223), (25, 198, 226), (31, 194, 229), (37, 190, 231), (44, 186, 234), (50, 182, 236), (56, 177, 239), (62, 173, 241), (68, 168, 243), (74, 163, 245), (80, 158, 246), (86, 153, 248), (92, 148, 249), (98, 143, 250), (103, 138, 252), (109, 133, 253), (115, 127, 253), (120, 122, 254), (126, 116, 254), (131, 111, 255), (136, 105, 255), (142, 99, 255), (147, 94, 255), (152, 88, 255), (157, 82, 254), (162, 76, 254), (167, 70, 253), (171, 64, 252), (176, 58, 251), (180, 52, 250), (185, 45, 248), (189, 39, 247), (193, 33, 245), (197, 27, 243), (201, 21, 242), (205, 14, 239), (208, 8, 237), (212, 2, 235), (215, 4, 232), (219, 11, 230), (222, 17, 227), (225, 23, 224), (228, 29, 221), (231, 36, 218), (233, 42, 214), (236, 48, 211), (238, 54, 207), (240, 60, 204), (242, 66, 200), (244, 72, 196), (246, 78, 192), (247, 84, 188), (249, 90, 183), (250, 96, 179), (251, 102, 174), (252, 107, 170), (253, 113, 165), (254, 119, 160), (254, 124, 155), (255, 130, 150), (255, 135, 145)]
colors_max = len(palette)
# Calculate the mandelbrot sequence for the point c with start value z
def iterate_mandelbrot(c, z = 0):
    for n in range(iterate_max + 1):
        z = z*z +c
        if abs(z) > 2.236:
            return n
    return None

# Draw our image
some_values = [0.5 + x/100.0 for x in range(1)]
a = 0.3

real_start = 0.2
imag_start = 0.5

cntr = 0
for a in range(10):
    real = real_start + a*0.1
    for b in range(10):
        imag = imag_start + b*0.1

        img = Image.new("RGB", dimensions)
        d = ImageDraw.Draw(img)

        for y in range(dimensions[1]):
            for x in range(dimensions[0]):
                c = complex(x * scale - center[0], y * scale - center[1])

                #n = iterate_mandelbrot(c)            # Use this for Mandelbrot set
                n = iterate_mandelbrot(complex(real, imag), c) or 0  # Use this for Julia set

                d.point((x, y), fill = palette[n%len(palette)])

        del d
        img.save(str(b + 10*a) + "- Julia.png")
        print(str(b + 10*a) + "- Julia.png")
